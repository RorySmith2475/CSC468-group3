import socket
import time

commands_user_1 = [
    'ADD,g5VER12123,63511.53', 
    'QUOTE,g5VER12123,S', 
    'BUY,g5VER12123,S,276.83', 
    'COMMIT_BUY,g5VER12123', 
    'COMMIT_SELL,g5VER12123', 
    'CANCEL_SELL,g5VER12123', 
    'QUOTE,g5VER12123,S', 
    'ADD,g5VER12123,45016.23', 
    'COMMIT_BUY,g5VER12123 ',
    'COMMIT_BUY,g5VER12123', 
    'DISPLAY_SUMMARY,g5VER12123', 
    'ADD,g5VER12123,71879.98',
    'BUY,g5VER12123,S,303.83', 
    'COMMIT_BUY,g5VER12123' ,
    'COMMIT_BUY,g5VER12123 ',
    'COMMIT_BUY,g5VER12123 ',
    'COMMIT_SELL,g5VER12123 ',
    'ADD,g5VER12123,74315.15 ',
    'CANCEL_BUY,g5VER12123 ',
    'CANCEL_SET_BUY,g5VER12123,S ',
   ' COMMIT_SELL,g5VER12123 ',
    'BUY,g5VER12123,S,51.49 ',
    'COMMIT_BUY,g5VER12123 ',
    'COMMIT_SELL,g5VER12123 ',
    'BUY,g5VER12123,S,156.07 ',
    'COMMIT_BUY,g5VER12123 ',
    'BUY,g5VER12123,S,575.27 ',
    'CANCEL_SELL,g5VER12123 ',
    'DISPLAY_SUMMARY,g5VER12123 ',
    'SET_BUY_AMOUNT,g5VER12123,S,658.38 ',
    'SELL,g5VER12123,S,641.90 ',
    'COMMIT_SELL,g5VER12123 ',
    'COMMIT_BUY,g5VER12123 ',
    'CANCEL_SET_SELL,g5VER12123,S ',
    'COMMIT_SELL,g5VER12123 ',
    'CANCEL_BUY,g5VER12123 ',
    'CANCEL_SELL,g5VER12123', 
    'BUY,g5VER12123,S,264.17 ',
    'QUOTE,g5VER12123,S ',
    'BUY,g5VER12123,S,657.49 ',
    'COMMIT_BUY,g5VER12123 ',
    'DISPLAY_SUMMARY,g5VER12123 ',
    'BUY,g5VER12123,S,710.47 ',
    'COMMIT_BUY,g5VER12123 ',
    'BUY,g5VER12123,S,208.11 ',
    'COMMIT_BUY,g5VER12123 ',
    'DISPLAY_SUMMARY,g5VER12123 ',
    'ADD,g5VER12123,52802.93 ',
    'BUY,g5VER12123,S,433.22 ',
    'SET_SELL_TRIGGER,g5VER12123,S,59.23 ',
    'BUY,g5VER12123,S,387.59 ',
    'COMMIT_BUY,g5VER12123 ',
    'CANCEL_BUY,g5VER12123 ',
    'COMMIT_BUY,g5VER12123 ',
    'COMMIT_SELL,g5VER12123 ',
    'CANCEL_SET_BUY,g5VER12123,S ',
    'CANCEL_SET_BUY,g5VER12123,S ',
    'DISPLAY_SUMMARY,g5VER12123 ',
    'QUOTE,g5VER12123,S ',
    'QUOTE,g5VER12123,S ',
    'SELL,g5VER12123,S,429.74 ',
    'SET_SELL_TRIGGER,g5VER12123,S,51.92 ',
    'BUY,g5VER12123,S,384.67 ',
    'COMMIT_BUY,g5VER12123 ',
    'COMMIT_BUY,g5VER12123 ',
    'BUY,g5VER12123,S,357.57 ',
    'CANCEL_BUY,g5VER12123 ',
    'SET_SELL_AMOUNT,g5VER12123,S,216.83 ',
    'CANCEL_SET_SELL,g5VER12123,S ',
    'BUY,g5VER12123,S,516.29 ',
    'CANCEL_BUY,g5VER12123 ',
    'SELL,g5VER12123,S,41.47 ',
    'SET_SELL_TRIGGER,g5VER12123,S,30.04 ',
    'COMMIT_SELL,g5VER12123 ',
    'CANCEL_SET_BUY,g5VER12123,S ',
    'CANCEL_SET_SELL,g5VER12123,S ',
    'BUY,g5VER12123,S,289.68 ',
    'CANCEL_SET_BUY,g5VER12123,S ',
    'ADD,g5VER12123,87863.73 ',
    'QUOTE,g5VER12123,S ',
    'BUY,g5VER12123,S,333.91 ',
    'COMMIT_BUY,g5VER12123 ',
    'SELL,g5VER12123,S,213.24 ',
    'BUY,g5VER12123,S,427.36 ',
    'CANCEL_SELL,g5VER12123 ',
    'BUY,g5VER12123,S,730.08 ',
    'COMMIT_BUY,g5VER12123 ',
    'BUY,g5VER12123,S,36.79 ',
    'COMMIT_BUY,g5VER12123 ',
    'SELL,g5VER12123,S,644.65 ',
    'CANCEL_SELL,g5VER12123 ',
    'COMMIT_BUY,g5VER12123 ',
    'CANCEL_SET_SELL,g5VER12123,S ',
    'CANCEL_SELL,g5VER12123 ',
    'CANCEL_SET_SELL,g5VER12123,S ',
    'BUY,g5VER12123,S,749.86 ',
    'COMMIT_BUY,g5VER12123 ',
    'CANCEL_BUY,g5VER12123 ',
    'SELL,g5VER12123,S,664.10 ',
    'DUMPLOG,./testLOG',
]

commands_user_2 = [
    'ADD,oY01WVirLr,63511.53', 
    'QUOTE,oY01WVirLr,S', 
    'BUY,oY01WVirLr,S,276.83', 
    'COMMIT_BUY,oY01WVirLr', 
    'COMMIT_SELL,oY01WVirLr', 
    'CANCEL_SELL,oY01WVirLr', 
    'QUOTE,oY01WVirLr,S', 
    'ADD,oY01WVirLr,45016.23', 
    'COMMIT_BUY,oY01WVirLr ',
    'COMMIT_BUY,oY01WVirLr', 
    'DISPLAY_SUMMARY,oY01WVirLr', 
    'ADD,oY01WVirLr,71879.98',
    'BUY,oY01WVirLr,S,303.83', 
    'COMMIT_BUY,oY01WVirLr' ,
    'COMMIT_BUY,oY01WVirLr ',
    'COMMIT_BUY,oY01WVirLr ',
    'COMMIT_SELL,oY01WVirLr ',
    'ADD,oY01WVirLr,74315.15 ',
    'CANCEL_BUY,oY01WVirLr ',
    'CANCEL_SET_BUY,oY01WVirLr,S ',
   ' COMMIT_SELL,oY01WVirLr ',
    'BUY,oY01WVirLr,S,51.49 ',
    'COMMIT_BUY,oY01WVirLr ',
    'COMMIT_SELL,oY01WVirLr ',
    'BUY,oY01WVirLr,S,156.07 ',
    'COMMIT_BUY,oY01WVirLr ',
    'BUY,oY01WVirLr,S,575.27 ',
    'CANCEL_SELL,oY01WVirLr ',
    'DISPLAY_SUMMARY,oY01WVirLr ',
    'SET_BUY_AMOUNT,oY01WVirLr,S,658.38 ',
    'SELL,oY01WVirLr,S,641.90 ',
    'COMMIT_SELL,oY01WVirLr ',
    'COMMIT_BUY,oY01WVirLr ',
    'CANCEL_SET_SELL,oY01WVirLr,S ',
    'COMMIT_SELL,oY01WVirLr ',
    'CANCEL_BUY,oY01WVirLr ',
    'CANCEL_SELL,oY01WVirLr', 
    'BUY,oY01WVirLr,S,264.17 ',
    'QUOTE,oY01WVirLr,S ',
    'BUY,oY01WVirLr,S,657.49 ',
    'COMMIT_BUY,oY01WVirLr ',
    'DISPLAY_SUMMARY,oY01WVirLr ',
    'BUY,oY01WVirLr,S,710.47 ',
    'COMMIT_BUY,oY01WVirLr ',
    'BUY,oY01WVirLr,S,208.11 ',
    'COMMIT_BUY,oY01WVirLr ',
    'DISPLAY_SUMMARY,oY01WVirLr ',
    'ADD,oY01WVirLr,52802.93 ',
    'BUY,oY01WVirLr,S,433.22 ',
    'SET_SELL_TRIGGER,oY01WVirLr,S,59.23 ',
    'BUY,oY01WVirLr,S,387.59 ',
    'COMMIT_BUY,oY01WVirLr ',
    'CANCEL_BUY,oY01WVirLr ',
    'COMMIT_BUY,oY01WVirLr ',
    'COMMIT_SELL,oY01WVirLr ',
    'CANCEL_SET_BUY,oY01WVirLr,S ',
    'CANCEL_SET_BUY,oY01WVirLr,S ',
    'DISPLAY_SUMMARY,oY01WVirLr ',
    'QUOTE,oY01WVirLr,S ',
    'QUOTE,oY01WVirLr,S ',
    'SELL,oY01WVirLr,S,429.74 ',
    'SET_SELL_TRIGGER,oY01WVirLr,S,51.92 ',
    'BUY,oY01WVirLr,S,384.67 ',
    'COMMIT_BUY,oY01WVirLr ',
    'COMMIT_BUY,oY01WVirLr ',
    'BUY,oY01WVirLr,S,357.57 ',
    'CANCEL_BUY,oY01WVirLr ',
    'SET_SELL_AMOUNT,oY01WVirLr,S,216.83 ',
    'CANCEL_SET_SELL,oY01WVirLr,S ',
    'BUY,oY01WVirLr,S,516.29 ',
    'CANCEL_BUY,oY01WVirLr ',
    'SELL,oY01WVirLr,S,41.47 ',
    'SET_SELL_TRIGGER,oY01WVirLr,S,30.04 ',
    'COMMIT_SELL,oY01WVirLr ',
    'CANCEL_SET_BUY,oY01WVirLr,S ',
    'CANCEL_SET_SELL,oY01WVirLr,S ',
    'BUY,oY01WVirLr,S,289.68 ',
    'CANCEL_SET_BUY,oY01WVirLr,S ',
    'ADD,oY01WVirLr,87863.73 ',
    'QUOTE,oY01WVirLr,S ',
    'BUY,oY01WVirLr,S,333.91 ',
    'COMMIT_BUY,oY01WVirLr ',
    'SELL,oY01WVirLr,S,213.24 ',
    'BUY,oY01WVirLr,S,427.36 ',
    'CANCEL_SELL,oY01WVirLr ',
    'BUY,oY01WVirLr,S,730.08 ',
    'COMMIT_BUY,oY01WVirLr ',
    'BUY,oY01WVirLr,S,36.79 ',
    'COMMIT_BUY,oY01WVirLr ',
    'SELL,oY01WVirLr,S,644.65 ',
    'CANCEL_SELL,oY01WVirLr ',
    'COMMIT_BUY,oY01WVirLr ',
    'CANCEL_SET_SELL,oY01WVirLr,S ',
    'CANCEL_SELL,oY01WVirLr ',
    'CANCEL_SET_SELL,oY01WVirLr,S ',
    'BUY,oY01WVirLr,S,749.86 ',
    'COMMIT_BUY,oY01WVirLr ',
    'CANCEL_BUY,oY01WVirLr ',
    'SELL,oY01WVirLr,S,664.10 ',
    'DUMPLOG,./testLOG',
]

times_taken = []

for command in commands_user_1:
    print(f"Executing command {command}")
    start_time = time.time()
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect(('192.168.4.2',4444))
    s.send(bytes(command, 'utf-8'))
    data = s.recv(1024)
    s.close()

    times_taken.append(time.time()-start_time)
    print(f"Received data ({times_taken[-1]} seconds): {data}")

print("\n\n")
print(f"Avg time taken per request: {sum(times_taken)/len(times_taken)}")
print(f"Longest time: {max(times_taken)} Shortest time: {min(times_taken)}")
